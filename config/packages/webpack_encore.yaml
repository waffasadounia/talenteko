# config/packages/webpack_encore.yaml
webpack_encore:
  # répertoire où se trouvent les fichiers de traduction (.yaml, .xlf, .php)
  output_path: '%kernel.project_dir%/public/build'

  # Attributs appliqués à toutes les balises <script>
  script_attributes:
    defer: true
    # À commenter si je veux que Turbo recharge quand les assets changent
    # 'data-turbo-track': reload

  # Attributs appliqués à toutes les balises <link>
  # link_attributes:
  #     'data-turbo-track': reload

framework:
  assets:
    # Manifest généré par Webpack Encore
    json_manifest_path: '%kernel.project_dir%/public/build/manifest.json'

when@prod:
  webpack_encore:
    # Active le cache pour ne pas relire entrypoints.json à chaque requête
    cache: true

when@test:
  webpack_encore:
    # Évite les erreurs si un entry manque pendant les tests
    strict_mode: false
