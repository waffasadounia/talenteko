{% extends 'base.html.twig' %}

{% block title %}
  Styleguide Cards | TalentÉkô
{% endblock %}

{% block body %}
  {% include 'styleguide/_nav.html.twig' %}

  <main class="container mx-auto space-y-12 px-6 py-12">
    <header class="space-y-2">
      <h1 class="text-primary-color text-3xl font-bold">
        Styleguide Cards | TalentÉkô
      </h1>
      <p class="text-gray-600">
        Page interne pour tester les composants UI TalentÉkô (cartes génériques et listings réels).
      </p>
    </header>

    {# Exemple unique de carte listing (markup identique au partial) #}
    <section class="space-y-4">
      <h2 class="text-xl font-semibold">Carte Listing (fidèle au partial)</h2>
      <div class="w-80">
        {% include 'partials/_listing_card.html.twig' with {
          listing: {
            slug: 'cours-guitare',
            title: 'Cours de guitare',
            description: 'Apprenez les bases ou perfectionnez-vous avec un musicien passionné.',
            category: { name: 'Musique', slug: 'musique' },
            images: [],
            author: { pseudo: 'Alice' },
            location: 'Paris'
          }
        } %}
      </div>
    </section>

    {# Exemple avec image fournie #}
    <section class="space-y-4">
      <h2 class="text-xl font-semibold">Carte Listing avec image</h2>
      <div class="w-80">
        {% include 'partials/_listing_card.html.twig' with {
          listing: {
            slug: 'cours-photo',
            title: 'Cours de photo',
            description: 'Initiez-vous à la photo avec un passionné.',
            category: { name: 'Photo', slug: 'photo' },
            images: [{ path: 'placeholder.png' }],
            author: { pseudo: 'Bob' },
            location: 'Marseille'
          }
        } %}
      </div>
    </section>

    {# Exemple avec favoris activé (statique) #}
    <section class="space-y-4">
      <h2 class="text-xl font-semibold">Carte Listing avec favoris activé</h2>
      <div class="w-80 card card-listing">
        <div
          class="relative overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm transition hover:shadow-md"
        >
          {# --- Bouton Favoris (forcé en état actif) --- #}
          <button
            type="button"
            class="text-talenteko-orange-500 hover:bg-talenteko-peach-200 absolute top-2 right-2 flex h-9 w-9 items-center justify-center rounded-full bg-white shadow transition"
            aria-label="Retirer des favoris"
          >
            <span>
              <i class="fa-solid fa-heart" aria-hidden="true"></i>
            </span>
          </button>

          {# --- Image placeholder --- #}
          <img
            src="{{ asset('images/placeholders/placeholder.png') }}"
            alt="Annonce favoris activé"
            class="h-40 w-full object-cover bg-gray-200"
            loading="lazy"
            width="400"
            height="225"
          />

          {# --- Contenu texte --- #}
          <div class="p-4 flex flex-col gap-2">
            <span class="text-talenteko-orange-500 inline-block text-xs font-semibold">
              Art
            </span>
            <h3 class="text-talenteko-blue-900 line-clamp-1 text-base font-bold">
              Atelier peinture
            </h3>
            <p class="text-talenteko-blue-600 line-clamp-2 text-sm">
              Partagez un moment artistique avec un passionné de peinture.
            </p>
            <div class="mt-3 flex items-center justify-between text-sm">
              <div class="flex items-center gap-2">
                <div
                  class="bg-talenteko-peach-200 text-talenteko-orange-500 flex h-8 w-8 items-center justify-center rounded-full font-bold"
                  aria-hidden="true"
                >
                  C
                </div>
                <span class="text-talenteko-blue-900 text-sm font-medium">Claire</span>
              </div>
              <span
                class="text-talenteko-blue-400 flex items-center gap-1 text-xs truncate max-w-[100px]"
              >
                <i class="fa fa-map-marker-alt text-talenteko-orange-500" aria-hidden="true"></i>
                Bordeaux
              </span>
            </div>
          </div>
        </div>
      </div>
      <p class="text-sm text-gray-500">
        Ici, le bouton favoris est affiché comme <strong>actif</strong> (cœur plein, état visuel forcé).
      </p>
    </section>

    {# Grille de plusieurs cartes pour tester la responsivité #}
    <section class="space-y-4">
      <h2 class="text-xl font-semibold">Grille de listings</h2>
      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {% for i in 1..3 %}
          <div class="w-full">
            {% include 'partials/_listing_card.html.twig' with {
              listing: {
                slug: 'annonce-' ~ i,
                title: 'Annonce ' ~ i,
                description: 'Description fictive pour l’annonce numéro ' ~ i,
                category: { name: 'Divers', slug: 'divers' },
                images: [],
                author: { pseudo: 'Membre' ~ i },
                location: 'Lyon'
              }
            } %}
          </div>
        {% endfor %}
      </div>
    </section>
  </main>
{% endblock %}
