{% extends 'base.html.twig' %}

{% block title %}
  Styleguide Cards | TalentÉkô
{% endblock %}

{% block body %}
  {% include 'styleguide/_nav.html.twig' %}

  <main class="container mx-auto space-y-12 px-6 py-12">
    <header class="space-y-2">
      <h1 class="text-primary-color text-3xl font-bold">Styleguide Cards | TalentÉkô</h1>
      <p class="text-gray-600">
        Page interne pour tester les composants UI TalentÉkô (cartes génériques et listings réels).
      </p>
    </header>

    {# ======================================
       Exemple unique de carte listing
       ====================================== #}
    <section class="space-y-4">
      <h2 class="text-xl font-semibold">Carte Annonce</h2>
      <div class="w-80">
        {% include 'partials/_listing_card.html.twig' with {
          listing: {
            slug: 'cours-guitare',
            title: 'Cours de guitare',
            description: 'Apprenez les bases ou perfectionnez-vous avec un musicien passionné.',
            category: {
              name: 'Musique',
              slug: 'musique'
            },
            images: [
              {
                path: 'placeholderTE.png'
              }
            ],
            author: {
              pseudo: 'Alice'
            },
            location: 'Paris'
          }
        } %}
      </div>
    </section>

    {# ======================================
       Exemple avec favoris activé (statique)
       ====================================== #}
    <section class="space-y-4">
      <h2 class="text-xl font-semibold">Carte Listing avec favoris activé</h2>
      <div class="card card-listing w-80">
        <div
          class="relative overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm transition hover:shadow-md"
        >
          {# --- Bouton Favoris (état actif forcé) --- #}
          <button
            type="button"
            class="absolute right-2 top-2 flex h-9 w-9 items-center justify-center rounded-full bg-white text-orange-500 shadow transition"
            aria-label="Retirer des favoris"
          >
            <i class="fa-solid fa-heart" aria-hidden="true"></i>
          </button>

          {# --- Image placeholder --- #}
          <img
            src="{{ asset('uploads/listings/placeholderTE.png') }}"
            alt="Annonce favoris activé"
            class="h-40 w-full bg-gray-200 object-cover"
            loading="lazy"
            width="400"
            height="225"
          />

          {# --- Contenu texte --- #}
          <div class="flex flex-col gap-2 p-4">
            <span class="inline-block text-xs font-semibold text-talenteko-orange-500">Art</span>
            <h3 class="line-clamp-1 text-base font-bold text-talenteko-blue-900">
              Atelier peinture
            </h3>
            <p class="line-clamp-2 text-sm text-talenteko-blue-600">
              Partagez un moment artistique avec un passionné de peinture.
            </p>
            <div class="mt-3 flex items-center justify-between gap-3 text-sm">
              <div class="flex min-w-0 items-center gap-2">
                <div
                  class="flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-talenteko-peach-200 font-bold text-talenteko-orange-500"
                  aria-hidden="true"
                >
                  C
                </div>
                <span class="max-w-[90px] truncate text-sm font-medium text-talenteko-blue-900">
                  Claire
                </span>
              </div>
              <span
                class="flex max-w-[90px] items-center gap-1 truncate text-xs text-talenteko-blue-400"
              >
                <i class="fa fa-map-marker-alt text-talenteko-orange-500" aria-hidden="true"></i>
                Bordeaux
              </span>
            </div>
          </div>
        </div>
      </div>

      <p class="text-sm text-gray-500">
        Ici, le bouton favoris est affiché comme <strong>actif</strong> (cœur plein, état visuel forcé).
      </p>
    </section>

    {# Grille de plusieurs cartes (test responsive)#}
    <section class="space-y-4">
      <h2 class="text-xl font-semibold">Grille de listings</h2>
      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {% for i in 1..3 %}
          <div class="w-full">
            {% include 'partials/_listing_card.html.twig' with {
              listing: {
                slug: 'annonce-' ~ i,
                title: 'Annonce ' ~ i,
                description: 'Description fictive pour l’annonce numéro ' ~ i,
                category: {
                  name: 'Divers',
                  slug: 'divers'
                },
                images: [
                  {
                    path: 'placeholderTE.png'
                  }
                ],
                author: {
                  pseudo: 'Membre' ~ i
                },
                location: 'Lyon'
              }
            } %}
          </div>
        {% endfor %}
      </div>
    </section>
  </main>
{% endblock %}
