{# ================================
  templates/profile/edit.html.twig
  Page d'édition de profil
  ================================ #}

{% extends 'base.html.twig' %}

{% block title %}
  Modifier mon profil | TalentÉkô
{% endblock %}

{% block body %}
  <section class="bg-talenteko-peach-100 py-12">
    <div class="mx-auto max-w-2xl px-6">
      <h1 class="mb-6 text-center text-3xl font-bold text-talenteko-orange-500">
        Modifier mon profil
      </h1>

      {# --- Bandeau erreurs global --- #}
      {% if not form.vars.valid and form.vars.submitted %}
        <div
          id="form-global-errors"
          class="mb-4 rounded-lg border border-red-300 bg-red-50 p-3 text-red-700"
          role="alert"
        >
          <strong class="font-semibold">Le formulaire contient des erreurs.</strong>
          <span class="ml-1">Merci de corriger les champs en rouge.</span>
        </div>
      {% endif %}

      <div class="rounded-2xl bg-white p-6 shadow-sm">
        {{
          form_start(
            form,
            {
              attr: {
                novalidate: 'novalidate',
                id: 'profile-form',
                class: 'tk-form'
              }
            }
          )
        }}

        <div class="space-y-6">
          {# === PSEUDO === #}
          {{
            form_row(
              form.pseudo,
              {
                label: 'Pseudonyme',
                row_attr: {
                  class: 'space-y-1'
                },
                attr: {
                  class: 'form-input',
                  placeholder: 'ex. BricoMan42'
                }
              }
            )
          }}

          {# === LOCALISATION === #}
          {{
            form_row(
              form.location,
              {
                label: 'Localisation',
                row_attr: {
                  class: 'space-y-1'
                },
                attr: {
                  class: 'form-input',
                  placeholder: 'ex. Paris, Lyon...'
                }
              }
            )
          }}

          <hr class="my-6 border-t border-gray-200" />

          {# === BIO === #}
          {{
            form_row(
              form.profile.bio,
              {
                label: 'À propos de vous',
                row_attr: {
                  class: 'space-y-1'
                },
                attr: {
                  class: 'form-textarea',
                  rows: 4
                }
              }
            )
          }}

          {# === COMPÉTENCES PROPOSÉES === #}
          {{
            form_row(
              form.profile.skillsOffered,
              {
                label: 'Compétences proposées',
                row_attr: {
                  class: 'space-y-1'
                },
                attr: {
                  class: 'form-input'
                }
              }
            )
          }}

          {# === COMPÉTENCES RECHERCHÉES === #}
          {{
            form_row(
              form.profile.skillsWanted,
              {
                label: 'Compétences recherchées',
                row_attr: {
                  class: 'space-y-1'
                },
                attr: {
                  class: 'form-input'
                }
              }
            )
          }}

          {# === AVATAR === #}
          {{
            form_row(
              form.profile.avatarFilename,
              {
                label: 'Photo de profil',
                row_attr: {
                  class: 'space-y-1'
                },
                attr: {
                  class: 'form-input-file'
                }
              }
            )
          }}
        </div>

        <div class="mt-8 flex justify-between">
          <a href="{{ path('app_profile_dashboard') }}" class="btn-outline">
            <i class="fa-solid fa-arrow-left mr-1"></i>
            Retour
          </a>
          <button class="btn-primary">
            <i class="fa-solid fa-floppy-disk mr-1"></i>
            Enregistrer
          </button>
        </div>

        {{ form_end(form) }}
      </div>
    </div>
  </section>
{% endblock %}
