{# ============================================================
   templates/profile/dashboard.html.twig
   Tableau de bord utilisateur 
   ============================================================ #}

{% extends 'base.html.twig' %}

{% block title %}
	Mon tableau de bord | TalentÉkô
{% endblock %}

{% block body %}
	<section class="mx-auto max-w-7xl px-4 py-2">
		{# === Navigation profil === #}
		{% include 'profile/_profile_nav.html.twig' %}
		{# === Titre principal === #}
		<h1 class="mb-8 flex items-center gap-3 text-3xl font-bold text-talenteko-blue-900">
			<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-talenteko-orange-500" fill="none" viewbox="0 0 24 24" stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-4 0-8 2-8 4v1h16v-1c0-2-4-4-8-4z"/>
			</svg>
			Mon profil
		</h1>

		{# ======================================================
		   BLOC PROFIL — Grille 3 colonnes
		   ====================================================== #}

		<div class="mb-10 rounded-xl border border-gray-200 bg-white p-6 shadow-sm">
			<div class="grid grid-cols-1 md:grid-cols-[1fr_1.5fr_1fr] gap-8 items-center">

				{# -------------------------------------------
					COLONNE 1 — Avatar + Identité + Localisation
				------------------------------------------- #}
				<div class="flex items-start gap-4">
					{# Avatar cercle #}
					<div class="flex h-20 w-20 items-center justify-center rounded-full bg-talenteko-peach-200 text-2xl font-bold text-talenteko-orange-500">
						{{ app.user.pseudo|slice(0,1)|upper }}
					</div>

					<div class="space-y-1">
						<div class="text-xl font-bold text-talenteko-blue-900">
							{{ app.user.pseudo }}#{{ app.user.tag }}
						</div>

						<div class="flex items-center text-gray-600 text-sm">
							<i class="fa-solid fa-envelope mr-2 text-talenteko-orange-500"></i>
							{{ app.user.email }}
						</div>

						<div class="flex items-center text-gray-600 text-sm">
							<i class="fa-solid fa-location-dot mr-2 text-talenteko-orange-500"></i>
							{{ app.user.location ?? 'Ville non renseignée' }}
						</div>
					</div>
				</div>
				{# -------------------------------------------
				           COLONNE 2 — Statistiques
				------------------------------------------- #}
				<div class="flex justify-center gap-14">
					<div class="text-center">
						<div class="text-3xl font-bold text-talenteko-blue-900">
							{{ app.user.listings|length }}
						</div>
						<div class="text-sm text-gray-500">Annonces</div>
					</div>

					<div class="text-center">
						<div class="text-3xl font-bold text-talenteko-blue-900">
							{{ app.user.favorites|length }}
						</div>
						<div class="text-sm text-gray-500">Favoris</div>
					</div>
				</div>
				{# -------------------------------------------
				           COLONNE 3 — Boutons
				------------------------------------------- #}
				<div class="flex flex-col gap-3 w-full md:w-auto md:items-end">
					<a href="{{ path('app_profile_edit') }}" class="btn-primary-sm pl-6 inline-flex items-center justify-center text-xs md:text-base w-full md:w-auto">
						<i class="fa-solid fa-pen mr-2 text-xs"></i>
						Modifier
					</a>
					<a href="{{ path('app_user_delete') }}" class="btn-outline-sm px-3 inline-flex items-center justify-center text-xs md:text-base w-full md:w-auto">
						<i class="fa-solid fa-trash mr-2 text-xs"></i>
						Supprimer
					</a>
				</div>
			</div>
		</div>
		{# ======================================================
			  BLOC BIO / COMPÉTENCES — en cartes
		====================================================== #}
		<div
			class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-14">

			{# BIO #}
			<div class="rounded-xl border border-gray-200 bg-white p-6 shadow-sm">
				<h2 class="text-lg font-bold text-talenteko-orange-500 mb-3">À propos de moi</h2>
				<p class="text-gray-700 whitespace-pre-line">
					{{ app.user.profile.bio ?? 'Aucune description renseignée.' }}
				</p>
			</div>

			{# Compétences offertes #}
			<div class="rounded-xl border border-gray-200 bg-white p-6 shadow-sm">
				<h2 class="text-lg font-bold text-talenteko-orange-500 mb-3">Je propose</h2>
				<p class="text-gray-700 whitespace-pre-line">
					{{ app.user.profile.skillsOffered ?? 'Aucune compétence renseignée.' }}
				</p>
			</div>

			{# Compétences recherchées #}
			<div class="rounded-xl border border-gray-200 bg-white p-6 shadow-sm">
				<h2 class="text-lg font-bold text-talenteko-orange-500 mb-3">Je recherche</h2>
				<p class="text-gray-700 whitespace-pre-line">
					{{ app.user.profile.skillsWanted ?? 'Aucune compétence renseignée.' }}
				</p>
			</div>

		</div>

		{# ======================================================
			Actions rapides — Dashboard
		====================================================== #}
		<div>
			<h2 class="mb-4 text-2xl font-bold text-talenteko-blue-900">
				Actions rapides
			</h2>

			<div class="grid grid-cols-1 md:grid-cols-4 gap-6">
				<a href="{{ path('app_listing_new') }}" class="dashboard-card bg-talenteko-orange-500 !text-white">
					<i class="fa-solid fa-plus text-2xl mb-2"></i>
					<span class="font-semibold">Nouvelle annonce</span>
				</a>

				<a href="{{ path('app_profile_listings') }}" class="dashboard-card">
					<i class="fa-solid fa-list text-2xl text-talenteko-orange-500 mb-2"></i>
					Mes annonces
				</a>

				<a href="{{ path('app_profile_exchanges') }}" class="dashboard-card">
					<i class="fa-solid fa-arrows-rotate text-2xl text-talenteko-orange-500 mb-2"></i>
					Mes échanges
				</a>

				<a href="{{ path('app_profile_favoris') }}" class="dashboard-card">
					<i class="fa-solid fa-heart text-2xl text-talenteko-orange-500 mb-2"></i>
					Mes favoris
				</a>
			</div>
		</div>
	</section>
{% endblock %}
