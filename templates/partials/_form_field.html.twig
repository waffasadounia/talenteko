{# ========================================== #
# Partial Twig : Champ générique (input)
# Usage : 
# {% include "partials/_form_field.html.twig" with {
#   field: form.email,
#   label: "Adresse email",
#   placeholder: "ex. vous@exemple.fr",
#   autocomplete: "email"
# } %}
# ========================================== #}

{% set isInvalid = (form_errors(field) is not empty) %}
{% set errorsId = field.vars.id ~ '-errors' %}

<div>
  <label for="{{ field.vars.id }}" class="form-label">
    {{ label }} <span class="form-required" aria-hidden="true">*</span>
  </label>

  {{ form_widget(field, {
    attr: {
      placeholder: placeholder|default(''),
      class: 'form-input' ~ (isInvalid ? ' is-invalid' : ''),
      'aria-invalid': isInvalid ? 'true' : 'false',
      'aria-describedby': isInvalid ? errorsId : null,
      autocomplete: autocomplete|default('off')
    }
  }) }}

  {% if isInvalid %}
    <p id="{{ errorsId }}" class="form-error" role="alert">
      {{ form_errors(field) }}
    </p>
  {% endif %}
</div>
