{# ============================================================================
   HEADER SANS CATÉGORIES — Page Recherche
   Même look que le header complet, mais sans la barre des catégories.
============================================================================ #}

{% set isUser = app.user is not null and app.user.id is not null %}

<header role="banner"
        class="bg-white dark:bg-talenteko-blue-900 shadow-sm"
        data-controller="header-nav">

    <div class="mx-auto max-w-7xl w-full flex items-center justify-between gap-6 px-6 py-3">

        {# --------------
           1 — LOGO
        -----------------#}
        <a href="{{ path('app_home') }}"
           class="flex shrink-0 flex-col items-center rounded-md text-center
                  focus:outline-none focus-visible:ring-2 focus-visible:ring-talenteko-orange-500 focus-visible:ring-offset-2">
            <img src="{{ asset('images/talenteko_logo.png') }}"
                 alt="Logo TalentÉkô"
                 class="max-h-10 w-auto rounded-full object-contain" />

            <span class="text-xs font-extrabold leading-tight">
                <span class="text-talenteko-blue-900 dark:text-white">Talent</span><span class="text-talenteko-orange-500">Ékô</span>
            </span>
        </a>

        {# -------------------------------------
           2 — BARRE DE RECHERCHE (desktop)
        ---------------------------------------#}
        <form action="{{ path('app_search') }}" method="get" role="search" aria-label="Recherche de compétences"
              class="relative hidden md:block min-w-[220px] max-w-xl flex-1">
            <label for="search-input" class="sr-only">Rechercher une compétence</label>
            <input id="search-input" type="search" name="q" placeholder="Rechercher une compétence"
                   class="w-full rounded-full border border-talenteko-orange-500 py-2 pl-10 pr-4
                          text-talenteko-blue-900 placeholder-gray-400
                          focus:border-talenteko-orange-500 focus:outline-none focus:ring-2
                          focus:ring-talenteko-orange-500 dark:bg-talenteko-blue-800 dark:text-white"/>
            <i class="fa fa-search absolute left-3 top-2.5 text-talenteko-orange-500"></i>
        </form>

        {# ---------------------------------------------------------------
           3 — NAVIGATION + CTA + SWITCH LOGIN/LOGOUT + BURGER
        ---------------------------------------------------------------- #}
        <div class="flex shrink-0 items-center gap-4 whitespace-nowrap">

            {# NAV DESKTOP #}
            <nav aria-label="Navigation principale"
                 class="hidden md:flex items-center gap-6">

                <a href="{{ path('app_home') }}" class="nav-link hover:text-talenteko-orange-600 hover:underline">
                    <i class="fa fa-home"></i><span>Accueil</span>
                </a>

                <a href="{{ path('app_search') }}" class="nav-link hover:text-talenteko-orange-600 hover:underline">
                    <i class="fa fa-search"></i><span>Recherche</span>
                </a>

                {% if isUser %}
                    <a href="{{ path('app_profile_favoris') }}" class="nav-link hover:underline">
                        <i class="fa fa-heart"></i><span>Favoris</span>
                    </a>

                    <a href="{{ path('app_messages') }}" class="nav-link hover:underline relative">
                        <i class="fa fa-envelope"></i><span>Messages</span>

                        {% if unreadCount|default(0) > 0 %}
                            <span class="absolute -top-2 -right-3 inline-flex h-4 w-4 items-center justify-center
                                           rounded-full bg-talenteko-orange-600 text-[10px] font-bold text-white">
                                {{ unreadCount }}
                            </span>
                        {% endif %}
                    </a>
                {% endif %}
            </nav>

            {# CTA Déposer une annonce #}
            <a href="{{ path('app_listing_new') }}"
               class="hidden md:flex btn-outline items-center gap-2 hover:bg-talenteko-orange-50">
                <i class="fa fa-plus-circle"></i><span>Déposer</span>
            </a>

            {# SWITCH LOGIN / LOGOUT #}
            {% if isUser %}
                <a href="{{ path('app_profile_dashboard') }}" class="hidden md:flex btn-primary items-center gap-2">
                    <i class="fa fa-user-circle"></i>
                    <span>Mon espace</span>
                </a>

                <a href="{{ path('app_logout') }}"
                   class="hidden md:flex text-talenteko-orange-500 hover:text-talenteko-orange-600"
                   aria-label="Se déconnecter">
                    <i class="fa-solid fa-right-from-bracket text-lg"></i>
                </a>
            {% else %}
                <a href="{{ path('app_login') }}" class="hidden md:flex btn-primary items-center gap-2">
                    <i class="fa fa-user"></i>
                    <span>Se connecter</span>
                </a>
            {% endif %}

            {# BURGER MOBILE #}
            <button class="md:hidden rounded-md p-2 text-talenteko-orange-500
                           focus:outline-none focus-visible:ring-2 focus-visible:ring-talenteko-orange-500 focus-visible:ring-offset-2"
                    aria-label="Menu mobile" data-action="click->header-nav#toggle">
                <i class="fa fa-bars text-xl"></i>
            </button>

            {% include 'partials/_mobile_menu.html.twig' %}
        </div>
    </div>
</header>
