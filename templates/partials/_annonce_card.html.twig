{# ================================
  partials/_annonce_card.html.twig
  Carte annonce TalentÉkô
  ================================ #}

<div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition relative">

  {# Bouton Favoris (toggle via Stimulus) #}
<button class="absolute top-2 right-2 text-talenteko-blue-400 hover:text-talenteko-orange-500"
        aria-label="Ajouter aux favoris"
        data-controller="favorite-toggle"
        data-action="click->favorite-toggle#toggle">
  <span data-favorite-toggle-target="empty">
    <i class="fa-regular fa-heart"></i>
  </span>

  <span data-favorite-toggle-target="filled" class="hidden">
    <i class="fa-solid fa-heart text-talenteko-orange-500"></i>
  </span>
</button>


  {# --- Image principale --- #}
  <a href="{{ path('app_listing_show', { slug: annonce.slug }) }}">
    <img src="{{ annonce.images|first
                 ? asset('uploads/listings/' ~ annonce.images|first.filename)
                 : asset('images/placeholder.png') }}"
         alt="{{ annonce.title }}"
         class="w-full h-40 object-cover">
  </a>

  {# --- Contenu texte --- #}
  <div class="p-4 flex flex-col gap-2">
    {# Catégorie #}
    <span class="inline-block text-xs font-semibold text-talenteko-orange-500">
  {{ annonce.category ?? 'Non classée' }}
</span>

    {# Titre cliquable #}
    <h3 class="text-base font-bold text-talenteko-blue line-clamp-1">
      <a href="{{ path('app_listing_show', { slug: annonce.slug }) }}">
        {{ annonce.title }}
      </a>
    </h3>

    {# Description tronquée (2 lignes max) #}
    <p class="text-sm text-talenteko-blue-600 line-clamp-2">
      {{ annonce.description }}
    </p>

    {# --- Footer infos auteur + ville --- #}
    <div class="flex justify-between items-center mt-3 text-sm">
      <div class="flex items-center gap-2">
        <div class="w-8 h-8 rounded-full bg-talenteko-peach-200 flex items-center justify-center font-bold text-talenteko-orange-500">
          {{ (annonce.author.pseudo ?? 'M')|slice(0,1)|upper }}
        </div>
        <span class="text-sm font-medium text-talenteko-blue">
          {{ annonce.author.pseudo ?? 'Membre' }}
        </span>
      </div>

      {% if annonce.location is defined and annonce.location %}
        <span class="text-xs text-talenteko-blue-400 flex items-center gap-1">
          <i class="fa fa-map-marker-alt text-talenteko-orange-500"></i> {{ annonce.location }}
        </span>
      {% endif %}
    </div>
  </div>
</div>
