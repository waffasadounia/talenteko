{% extends 'base.html.twig' %}

{# il attend deux variables : q --> requete saisie par 'utilisateur (peut être vide)
   results --> tableau d'objets "annonces" correspondant à la recherche (même format que sur la homepage)
#}

{# 
  <title> de la page (affiché dans l’onglet du navigateur). 
  On ajoute le terme recherché s’il existe. 
#}
{% block title %}Recherche{% if q %} — « {{ q }} »{% endif %} | TalentÉkô{% endblock %}

{% block content %}

  {# ================== En-tête ================== #}
  <section class="py-10 bg-[#FFF6F2]">
    <div class="max-w-6xl mx-auto px-4">
      <h1 class="text-3xl font-bold text-center text-[#E2865A] mb-6">
        Résultats{% if q %} pour « {{ q }} »{% endif %}
      </h1>

      {# Formulaire de recherche rapide (champ texte + bouton).
         Il recharge la page avec ?q=... dans l’URL. #}
      <form action="{{ path('app_search') }}" method="get" class="flex justify-center gap-2">
        <input
          type="text"
          name="q"
          value="{{ q }}"
          placeholder="Rechercher une compétence, une ville, une catégorie…"
          class="border border-gray-300 rounded-lg px-3 py-2 w-2/3 focus:outline-none focus:ring-2 focus:ring-orange-300"
        >
        <button class="bg-[#E2865A] text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition">
          Rechercher
        </button>
      </form>
    </div>
  </section>

  {# ================== Résultats ================== #}
  <section class="py-10 bg-white">
    <div class="max-w-6xl mx-auto px-4">

      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        {% for annonce in results %}
          {# Chaque annonce est rendue par le partial de carte #}
          {% include 'partials/_annonce_card.html.twig' with { annonce: annonce } %}
        {% else %}
          {# S’il n’y a aucun résultat #}
          <p class="text-center col-span-full text-gray-600">
            {% if q %}
              Aucun résultat pour « {{ q }} ».
            {% else %}
              Entrez un terme de recherche pour voir des annonces.
            {% endif %}
          </p>
        {% endfor %}
      </div>

    </div>
  </section>

  {# ================== Messages flash (erreurs/succès) ================== #}
  {% include 'partials/_flash.html.twig' %}

{% endblock %}